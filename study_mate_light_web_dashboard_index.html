<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>StudyMate Light</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/recharts/umd/Recharts.min.js"></script>
</head>
<body class="bg-gray-50">
  <div id="root" class="p-4"></div>
  <script>
    const { useState, useEffect } = React;
    const { LineChart, Line, CartesianGrid, XAxis, YAxis, Tooltip, ResponsiveContainer } = Recharts;

    function App(){
      const [lux,setLux] = useState(500);
      const [dist,setDist] = useState(45);
      const [temp,setTemp] = useState(26);
      const [hum,setHum] = useState(55);
      const [led,setLed] = useState(50);
      const [time,setTime] = useState(1500);
      const [history,setHistory] = useState([]);

      useEffect(()=>{
        const id=setInterval(()=>{
          const newLux=Math.max(200,Math.min(800, lux+ (Math.random()*40-20)));
          const newDist=Math.max(20,Math.min(80, dist+(Math.random()*6-3)));
          const newTemp=Math.max(20,Math.min(32, temp+(Math.random()*2-1)));
          const newHum=Math.max(30,Math.min(70, hum+(Math.random()*4-2)));
          setLux(newLux); setDist(newDist); setTemp(newTemp); setHum(newHum);
          setLed(newLux<400?Math.min(100,led+5):newLux>600?Math.max(0,led-5):led);
          setHistory(h=>[...h.slice(-30),{lux:newLux,dist:newDist,temp:newTemp,hum:newHum,time:new Date().toLocaleTimeString()}]);
          setTime(t=>t>0?t-1:t);
        },1000);
        return()=>clearInterval(id);
      },[lux,dist,temp,hum,led]);

      return React.createElement("div",{className:"space-y-6"},[
        React.createElement("h1",{className:"text-2xl font-bold"},"StudyMate Light Dashboard"),
        React.createElement("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4"},[
          InfoCard("Lux",lux.toFixed(0),"400-600"),
          InfoCard("LED %",led.toFixed(0),"auto"),
          InfoCard("Nhiệt độ",temp.toFixed(1)+"°C","22-28"),
          InfoCard("Độ ẩm",hum.toFixed(0)+"%","40-60"),
          InfoCard("Khoảng cách",dist.toFixed(0)+"cm","35-60"),
        ]),
        React.createElement("div",{className:"p-4 bg-white rounded-xl border"},[
          React.createElement("h2",{className:"font-semibold mb-2"},"Pomodoro"),
          React.createElement("div",{className:"text-3xl font-bold"},`${Math.floor(time/60)}:${String(time%60).padStart(2,'0')}`)
        ]),
        React.createElement("div",{className:"h-64 bg-white rounded-xl border p-2"},[
          React.createElement(ResponsiveContainer,{width:"100%",height:"100%"},
            React.createElement(LineChart,{data:history},
              React.createElement(CartesianGrid,{stroke:"#ccc",strokeDasharray:"5 5"}),
              React.createElement(XAxis,{dataKey:"time",minTickGap:20}),
              React.createElement(YAxis,null),
              React.createElement(Tooltip,null),
              React.createElement(Line,{type:"monotone",dataKey:"lux",stroke:"#10b981",dot:false}),
              React.createElement(Line,{type:"monotone",dataKey:"temp",stroke:"#3b82f6",dot:false}),
              React.createElement(Line,{type:"monotone",dataKey:"hum",stroke:"#f59e0b",dot:false}),
              React.createElement(Line,{type:"monotone",dataKey:"dist",stroke:"#ef4444",dot:false})
            )
          )
        ])
      ]);
    }

    function InfoCard(title,value,range){
      return React.createElement("div",{className:"p-4 bg-white rounded-xl border"},[
        React.createElement("div",{className:"text-sm text-gray-500"},title),
        React.createElement("div",{className:"text-xl font-bold"},value),
        React.createElement("div",{className:"text-xs text-gray-400"},`Chuẩn: ${range}`)
      ]);
    }

    const root=ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(App));
  </script>
</body>
</html>
